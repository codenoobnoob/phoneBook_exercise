(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),c=n(3),o=n(2),u=n.n(o),i=n(0),s=function(e){var t=e.id,n=e.name,a=e.deleteFunction;return Object(i.jsx)("button",{id:t,"data-fullname":n,style:{marginLeft:5},onClick:a,children:"delete"})},l=function(e){var t=e.id,n=e.name,a=e.number,r=e.deletePerson;return Object(i.jsxs)("p",{children:[n," ",a,Object(i.jsx)(s,{id:t,name:n,deleteFunction:r})]})},d=function(e){var t=e.persons,n=e.filter,a=e.deletePerson,r=[];return t.forEach((function(e){(""===n||e.name.toLowerCase().includes(n.toLowerCase()))&&r.push(Object(i.jsx)(l,{id:e.id,name:e.name,number:e.number,deletePerson:a},e.name))})),r},f=function(e){var t=e.filter,n=e.handeleFilterChange;return Object(i.jsxs)("div",{children:["filter shown with: ",Object(i.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.newName,n=e.newNumber,a=e.handleNameChange,r=e.handeleNumberChange,c=e.addName;return Object(i.jsxs)("form",{onSubmit:c,children:[Object(i.jsx)("h2",{children:"add new contact"}),Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:n,onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},m=function(){},j=function(e){e.props;var t=u.a.useState({message:null,isError:!1}),n=Object(c.a)(t,2),a=n[0],r=n[1];if(m=function(e,t,n){0===n?function(e,t){a&&clearTimeout(),r({message:e,isError:t})}(e,t):function(e,t,n){console.log(e,t,n),r({message:e,isError:t}),setTimeout((function(){r({message:null,isError:!1})}),n)}(e,t,n)},null!==a.message){if(a.isError)return Object(i.jsx)("div",{className:"error",children:a.message});if(!a.isError)return Object(i.jsx)("div",{className:"message",children:a.message})}return null},b=n(4),p=n.n(b),g="/api/people",v={getData:function(){return p.a.get(g).then((function(e){return e.data}))},addData:function(e){return p.a.post(g,e).then((function(e){return e.data}))},updateData:function(e,t){return p.a.put("".concat(g,"/").concat(e),t).then((function(e){return e.data}))},removeData:function(e){return p.a.delete("".concat(g,"/").concat(e)).then((function(){return!0}))}},O=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),u=Object(c.a)(r,2),s=u[0],l=u[1],b=Object(o.useState)(""),p=Object(c.a)(b,2),g=p[0],O=p[1],x=Object(o.useState)(""),w=Object(c.a)(x,2),N=w[0],C=w[1];Object(o.useEffect)((function(){v.getData().then((function(e){a(e)})).catch((function(e){m("Could not connect to the server. Please check server connectivity and refresh the page! ".concat(e),!0,0)}))}),[]);return Object(i.jsxs)("div",{className:"mainWindow",children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(j,{},"messages"),Object(i.jsx)(f,{filter:N,handeleFilterChange:function(e){e.preventDefault(),C(e.target.value)}},"filter"),Object(i.jsx)(h,{newName:s,newNumber:g,handleNameChange:function(e){e.preventDefault(),l(e.target.value)},handeleNumberChange:function(e){e.preventDefault(),O(e.target.value)},addName:function(e){e.preventDefault();var t=n.map((function(e){return e.name})).indexOf(s);if(-1!==t)window.confirm("".concat(s," is aleady added to phonebook, replace the old number with the new one?"))&&v.updateData(n[t].id,{number:g}).then((function(e){console.log(e),a(n.map((function(a){return a.id!==n[t].id?a:e}))),m("".concat(s," phone number was changed"),!1,5e3)})).catch((function(e){m("error while trying to update person",!0,5e3)}));else{var r={name:s,number:g};v.addData(r).then((function(e){console.log(e),a(n.concat(e)),m("".concat(s," added to phonebook"),!1,5e3)})).catch((function(e){m(e.response.data.error,!0,5e3)}))}l(""),O("")}},"personform"),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{persons:n,filter:N,deletePerson:function(e){e.preventDefault(),window.confirm("Are you sure you want to delete ".concat(e.target.dataset.fullname))&&v.removeData(e.target.id).then((function(t){t&&(a(n.filter((function(t){return t.id!==e.target.id}))),m("Person ".concat(e.target.dataset.fullname," was removed from the server"),!1,5e3))})).catch((function(t){m("Person ".concat(e.target.dataset.fullname," was already removed from the server, Please refresh the page."),!0,5e3)}))}},"people")]})};n(38);r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.173b778b.chunk.js.map