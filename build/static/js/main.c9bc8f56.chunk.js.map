{"version":3,"sources":["components/Render.js","components/Filter.js","components/PersonForm.js","components/Notifications.js","services/persons.js","App.js","index.js"],"names":["DeleteButton","id","name","deleteFunction","data-fullname","style","marginLeft","onClick","ListPerson","number","deletePerson","Persons","persons","filter","renderList","forEach","person","toLowerCase","includes","push","Filter","handeleFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handeleNumberChange","addName","onSubmit","type","notifications","NotificationMessage","message","isError","className","setMessageWithTimeout","setFunction","timeout","setTimeout","errorMessage","baseUrl","personsService","getData","axios","get","then","response","data","addData","newData","post","updateData","put","removeData","delete","App","useState","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","initialData","catch","error","e","preventDefault","target","newMessage","newIsError","indexOfExisting","map","indexOf","window","confirm","oldId","updatedPerson","returnedPerson","newPerson","Math","max","concat","dataset","fullname","parseInt","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c9bc8f56.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DeleteButton = ({ id, name, deleteFunction }) => {\r\n  return (\r\n    <button\r\n      id={id}\r\n      data-fullname={name}\r\n      style={{ marginLeft: 5 }}\r\n      onClick={deleteFunction}\r\n    >\r\n      delete\r\n    </button>\r\n  );\r\n};\r\n\r\nconst ListPerson = ({ id, name, number, deletePerson }) => {\r\n  return (\r\n    <p>\r\n      {name} {number}\r\n      <DeleteButton id={id} name={name} deleteFunction={deletePerson} />\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Persons = ({ persons, filter, deletePerson }) => {\r\n  const renderList = [];\r\n  persons.forEach((person) => {\r\n    if (\r\n      filter === \"\" ||\r\n      person.name.toLowerCase().includes(filter.toLowerCase())\r\n    ) {\r\n      renderList.push(\r\n        <ListPerson\r\n          key={person.name}\r\n          id={person.id}\r\n          name={person.name}\r\n          number={person.number}\r\n          deletePerson={deletePerson}\r\n        />\r\n      );\r\n    }\r\n  });\r\n  return renderList;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handeleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={filter} onChange={handeleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handeleNumberChange,\r\n  addName,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <h2>add new contact</h2>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handeleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst errorMessage = (message, isError, setFunction) => {\r\n  setFunction({\r\n    message: message,\r\n    isError: isError,\r\n  });\r\n};\r\n\r\nconst setMessageWithTimeout = (message, isError, setFunction, timeout) => {\r\n  setFunction({\r\n    message: message,\r\n    isError: isError,\r\n  });\r\n  setTimeout(() => {\r\n    setFunction({ message: null, isError: false });\r\n  }, timeout);\r\n};\r\n\r\nconst NotificationMessage = ({ message, isError }) => {\r\n  if (message !== null) {\r\n    if (isError) {\r\n      return <div className=\"error\">{message}</div>;\r\n    } else if (!isError) {\r\n      return <div className=\"message\">{message}</div>;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst notifications = {\r\n  NotificationMessage,\r\n  setMessageWithTimeout,\r\n  errorMessage,\r\n};\r\n\r\nexport default notifications;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getData = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst addData = (newData) =>\r\n  axios.post(baseUrl, newData).then((response) => response.data);\r\n\r\nconst updateData = (id, newData) =>\r\n  axios.put(`${baseUrl}/${id}`, newData).then((response) => response.data);\r\n\r\nconst removeData = (id) => axios.delete(`${baseUrl}/${id}`).then(() => true);\r\n\r\nconst personsService = {\r\n  getData: getData,\r\n  addData: addData,\r\n  updateData: updateData,\r\n  removeData: removeData,\r\n};\r\nexport default personsService;\r\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Render\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport notifications from \"./components/Notifications\"\nimport personsService from \"./services/persons\"\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState({message: null, isError: false});\n\n  const getDevData = () => {\n    personsService.getData().then(initialData => {\n      setPersons(initialData)\n    }).catch(error => {\n      notifications.errorMessage(`Could not connect to the server. Please check server connectivity and refresh the page! ${error}`, true, setMessage)\n    })\n  }\n\n\n  useEffect(getDevData, []);\n  \n \n\n  const AddName = (e) => {\n    e.preventDefault();\n    let newMessage = null\n    let newIsError = false\n    const indexOfExisting = persons.map((person) => person.name).indexOf(newName) \n    if (indexOfExisting !== -1) {\n      if (window.confirm(`${newName} is aleady added to phonebook, replace the old number with the new one?`)) {\n        newMessage = `${newName} phone number was changed`\n        const oldId = persons[indexOfExisting].id\n        const updatedPerson = {\n          name: newName,\n          number: newNumber,\n          id: oldId\n        }\n        personsService.updateData(persons[indexOfExisting].id, updatedPerson).then(returnedPerson => setPersons(persons.map(person => person.id !== oldId ? person : returnedPerson))).catch(error => {\n          newMessage = \"error while trying to update person\"\n          newIsError = true\n        })\n      }\n    } else {\n      newMessage = `${newName} added to phonebook`\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n        id: Math.max(persons.map((person) => person.id) + 1),\n      };\n      setPersons(\n        persons.concat({\n          newPerson,\n        })\n      );\n      personsService.addData(newPerson).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n      }).catch(error => {\n        newMessage = \"error while trying to add person\"\n        newIsError = true\n      })\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n    notifications.setMessageWithTimeout(newMessage, newIsError, setMessage, 5000)\n  };\n  const handleNameChange = (e) => {\n    e.preventDefault();\n    setNewName(e.target.value);\n  };\n  const handeleNumberChange = (e) => {\n    e.preventDefault();\n    setNewNumber(e.target.value);\n  };\n  const handeleFilterChange = (e) => {\n    e.preventDefault();\n    setFilter(e.target.value);\n  };\n\n  const deletePerson = (e) => {\n    e.preventDefault()\n    if (window.confirm(`Are you sure you want to delete ${e.target.dataset.fullname}`)) {\n      personsService.removeData(e.target.id).then((response) => { \n        if (response) {\n          setPersons(persons.filter(person => person.id !== parseInt(e.target.id, 10)))\n          notifications.setMessageWithTimeout(`Person ${e.target.dataset.fullname} was removed from the server`, false, setMessage, 5000)\n        } \n      }).catch(error => {\n        notifications.setMessageWithTimeout(`Person ${e.target.dataset.fullname} was already removed from the server, Please refresh the page.`, true, setMessage, 5000)\n      })\n    }\n\n  }\n\n  return (\n    <div className=\"mainWindow\">\n      <h1>Phonebook</h1>\n      <notifications.NotificationMessage key=\"messages\" message={message.message} isError={message.isError} />\n      <Filter key=\"filter\" filter={filter} handeleFilterChange={handeleFilterChange} />\n      <PersonForm\n        key=\"personform\"\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handeleNumberChange={handeleNumberChange}\n        addName={AddName}\n      />\n      <h2>Numbers</h2>\n      <Persons key=\"persons\" persons={persons} filter={filter} deletePerson={deletePerson} />\n    </div>  \n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}