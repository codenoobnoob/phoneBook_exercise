{"version":3,"sources":["components/Render.js","components/Filter.js","components/PersonForm.js","components/Notifications.js","services/persons.js","App.js","index.js"],"names":["DeleteButton","id","name","deleteFunction","data-fullname","style","marginLeft","onClick","ListPerson","number","deletePerson","Persons","persons","filter","renderList","forEach","person","toLowerCase","includes","push","Filter","handeleFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handeleNumberChange","addName","onSubmit","type","setNotificationMessage","NotificationMessage","props","React","useState","message","isError","setMessage","console","log","newMessage","newIsError","timeoutTime","clearTimeout","errorMessage","timeout","setTimeout","setMessageWithTimeout","className","baseUrl","personsService","getData","axios","get","then","response","data","addData","newData","post","updateData","put","removeData","delete","App","setPersons","setNewName","setNewNumber","setFilter","useEffect","initialData","catch","error","e","preventDefault","target","length","indexOfExisting","map","indexOf","window","confirm","updatedNumber","returnedPerson","newPerson","concat","dataset","fullname","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6ef00a13.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DeleteButton = ({ id, name, deleteFunction }) => {\r\n  return (\r\n    <button\r\n      id={id}\r\n      data-fullname={name}\r\n      style={{ marginLeft: 5 }}\r\n      onClick={deleteFunction}\r\n    >\r\n      delete\r\n    </button>\r\n  );\r\n};\r\n\r\nconst ListPerson = ({ id, name, number, deletePerson }) => {\r\n  return (\r\n    <p>\r\n      {name} {number}\r\n      <DeleteButton id={id} name={name} deleteFunction={deletePerson} />\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Persons = ({ persons, filter, deletePerson }) => {\r\n  const renderList = [];\r\n  persons.forEach((person) => {\r\n    if (\r\n      filter === \"\" ||\r\n      person.name.toLowerCase().includes(filter.toLowerCase())\r\n    ) {\r\n      renderList.push(\r\n        <ListPerson\r\n          key={person.name}\r\n          id={person.id}\r\n          name={person.name}\r\n          number={person.number}\r\n          deletePerson={deletePerson}\r\n        />\r\n      );\r\n    }\r\n  });\r\n  return renderList;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handeleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={filter} onChange={handeleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handeleNumberChange,\r\n  addName,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <h2>add new contact</h2>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handeleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nlet setNotificationMessage = () => {};\r\n\r\nconst NotificationMessage = ({ props }) => {\r\n  const [message, setMessage] = React.useState({\r\n    message: null,\r\n    isError: false,\r\n  });\r\n\r\n  console.log(\"notification rendered\\nMessage: '\" + message.message + \"'\");\r\n\r\n  const errorMessage = (newMessage, newIsError) => {\r\n    if (message) {\r\n      clearTimeout();\r\n    }\r\n\r\n    setMessage({\r\n      message: newMessage,\r\n      isError: newIsError,\r\n    });\r\n  };\r\n\r\n  const setMessageWithTimeout = (newMessage, newIsError, timeout) => {\r\n    console.log(newMessage, newIsError, timeout);\r\n    setMessage({\r\n      message: newMessage,\r\n      isError: newIsError,\r\n    });\r\n    setTimeout(() => {\r\n      setMessage({ message: null, isError: false });\r\n    }, timeout);\r\n  };\r\n\r\n  setNotificationMessage = (newMessage, newIsError, timeoutTime) => {\r\n    if (timeoutTime === 0) {\r\n      errorMessage(newMessage, newIsError);\r\n    } else {\r\n      setMessageWithTimeout(newMessage, newIsError, timeoutTime);\r\n    }\r\n  };\r\n  if (message.message !== null) {\r\n    if (message.isError) {\r\n      return <div className=\"error\">{message.message}</div>;\r\n    } else if (!message.isError) {\r\n      return <div className=\"message\">{message.message}</div>;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport { setNotificationMessage };\r\nexport default NotificationMessage;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getData = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst addData = (newData) =>\r\n  axios.post(baseUrl, newData).then((response) => {\r\n    console.log(response.data);\r\n    return response.data;\r\n  });\r\n\r\nconst updateData = (id, newData) =>\r\n  axios.put(`${baseUrl}/${id}`, newData).then((response) => response.data);\r\n\r\nconst removeData = (id) => axios.delete(`${baseUrl}/${id}`).then(() => true);\r\n\r\nconst personsService = {\r\n  getData: getData,\r\n  addData: addData,\r\n  updateData: updateData,\r\n  removeData: removeData,\r\n};\r\nexport default personsService;\r\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Render\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport NotificationMessage from \"./components/Notifications\";\nimport { setNotificationMessage } from \"./components/Notifications\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n\n  const getDevData = () => {\n    personsService\n      .getData()\n      .then((initialData) => {\n        setPersons(initialData);\n      })\n      .catch((error) => {\n        setNotificationMessage(\n          `Could not connect to the server. Please check server connectivity and refresh the page! ${error}`,\n          true,\n          0\n        );\n      });\n  };\n\n  useEffect(getDevData, []);\n\n  const addName = (e) => {\n    e.preventDefault();\n    if (newName.length < 3 || newNumber.length < 3) {\n      setNotificationMessage(\n        \"The entered values are not allowed. must contain at least three characters\",\n        true,\n        5000\n      );\n    } else {\n      const indexOfExisting = persons\n        .map((person) => person.name)\n        .indexOf(newName);\n      if (indexOfExisting !== -1) {\n        if (\n          window.confirm(\n            `${newName} is aleady added to phonebook, replace the old number with the new one?`\n          )\n        ) {\n          const updatedNumber = {\n            number: newNumber,\n          };\n          personsService\n            .updateData(persons[indexOfExisting].id, updatedNumber)\n            .then((returnedPerson) => {\n              console.log(returnedPerson);\n              setPersons(\n                persons.map((person) =>\n                  person.id !== persons[indexOfExisting].id\n                    ? person\n                    : returnedPerson\n                )\n              );\n              setNotificationMessage(\n                `${newName} phone number was changed`,\n                false,\n                5000\n              );\n            })\n            .catch((error) => {\n              setNotificationMessage(\n                \"error while trying to update person\",\n                true,\n                5000\n              );\n            });\n        }\n      } else {\n        const newPerson = {\n          name: newName,\n          number: newNumber,\n        };\n        personsService\n          .addData(newPerson)\n          .then((returnedPerson) => {\n            console.log(returnedPerson);\n            setPersons(persons.concat(returnedPerson));\n            setNotificationMessage(\n              `${newName} added to phonebook`,\n              false,\n              5000\n            );\n          })\n          .catch((error) => {\n            setNotificationMessage(\n              \"error while trying to add person\",\n              true,\n              5000\n            );\n          });\n      }\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  };\n  const handleNameChange = (e) => {\n    e.preventDefault();\n    setNewName(e.target.value);\n  };\n  const handeleNumberChange = (e) => {\n    e.preventDefault();\n    setNewNumber(e.target.value);\n  };\n  const handeleFilterChange = (e) => {\n    e.preventDefault();\n    setFilter(e.target.value);\n  };\n\n  const deletePerson = (e) => {\n    e.preventDefault();\n    if (\n      window.confirm(\n        `Are you sure you want to delete ${e.target.dataset.fullname}`\n      )\n    ) {\n      //poistaa väärän henkilön, aina ensimmäinen listassa.\n      personsService\n        .removeData(e.target.id)\n        .then((response) => {\n          if (response) {\n            setPersons(persons.filter((person) => person.id !== e.target.id));\n            setNotificationMessage(\n              `Person ${e.target.dataset.fullname} was removed from the server`,\n              false,\n              5000\n            );\n          }\n        })\n        .catch((error) => {\n          setNotificationMessage(\n            `Person ${e.target.dataset.fullname} was already removed from the server, Please refresh the page.`,\n            true,\n            5000\n          );\n        });\n    }\n  };\n  return (\n    <div className=\"mainWindow\">\n      <h1>Phonebook</h1>\n      <NotificationMessage key=\"messages\" />\n      <Filter\n        key=\"filter\"\n        filter={filter}\n        handeleFilterChange={handeleFilterChange}\n      />\n      <PersonForm\n        key=\"personform\"\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handeleNumberChange={handeleNumberChange}\n        addName={addName}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        key=\"persons\"\n        persons={persons}\n        filter={filter}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}