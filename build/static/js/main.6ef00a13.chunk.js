(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),o=n(3),c=n(2),s=n.n(c),i=n(0),u=function(e){var t=e.id,n=e.name,a=e.deleteFunction;return Object(i.jsx)("button",{id:t,"data-fullname":n,style:{marginLeft:5},onClick:a,children:"delete"})},l=function(e){var t=e.id,n=e.name,a=e.number,r=e.deletePerson;return Object(i.jsxs)("p",{children:[n," ",a,Object(i.jsx)(u,{id:t,name:n,deleteFunction:r})]})},d=function(e){var t=e.persons,n=e.filter,a=e.deletePerson,r=[];return t.forEach((function(e){(""===n||e.name.toLowerCase().includes(n.toLowerCase()))&&r.push(Object(i.jsx)(l,{id:e.id,name:e.name,number:e.number,deletePerson:a},e.name))})),r},f=function(e){var t=e.filter,n=e.handeleFilterChange;return Object(i.jsxs)("div",{children:["filter shown with: ",Object(i.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.newName,n=e.newNumber,a=e.handleNameChange,r=e.handeleNumberChange,o=e.addName;return Object(i.jsxs)("form",{onSubmit:o,children:[Object(i.jsx)("h2",{children:"add new contact"}),Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:n,onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},m=function(){},j=function(e){e.props;var t=s.a.useState({message:null,isError:!1}),n=Object(o.a)(t,2),a=n[0],r=n[1];console.log("notification rendered\nMessage: '"+a.message+"'");if(m=function(e,t,n){0===n?function(e,t){a&&clearTimeout(),r({message:e,isError:t})}(e,t):function(e,t,n){console.log(e,t,n),r({message:e,isError:t}),setTimeout((function(){r({message:null,isError:!1})}),n)}(e,t,n)},null!==a.message){if(a.isError)return Object(i.jsx)("div",{className:"error",children:a.message});if(!a.isError)return Object(i.jsx)("div",{className:"message",children:a.message})}return null},b=n(4),g=n.n(b),p="/api/persons",v={getData:function(){return g.a.get(p).then((function(e){return e.data}))},addData:function(e){return g.a.post(p,e).then((function(e){return console.log(e.data),e.data}))},updateData:function(e,t){return g.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},removeData:function(e){return g.a.delete("".concat(p,"/").concat(e)).then((function(){return!0}))}},O=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],l=s[1],b=Object(c.useState)(""),g=Object(o.a)(b,2),p=g[0],O=g[1],w=Object(c.useState)(""),x=Object(o.a)(w,2),N=x[0],C=x[1];Object(c.useEffect)((function(){v.getData().then((function(e){a(e)})).catch((function(e){m("Could not connect to the server. Please check server connectivity and refresh the page! ".concat(e),!0,0)}))}),[]);return Object(i.jsxs)("div",{className:"mainWindow",children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(j,{},"messages"),Object(i.jsx)(f,{filter:N,handeleFilterChange:function(e){e.preventDefault(),C(e.target.value)}},"filter"),Object(i.jsx)(h,{newName:u,newNumber:p,handleNameChange:function(e){e.preventDefault(),l(e.target.value)},handeleNumberChange:function(e){e.preventDefault(),O(e.target.value)},addName:function(e){if(e.preventDefault(),u.length<3||p.length<3)m("The entered values are not allowed. must contain at least three characters",!0,5e3);else{var t=n.map((function(e){return e.name})).indexOf(u);if(-1!==t){if(window.confirm("".concat(u," is aleady added to phonebook, replace the old number with the new one?"))){var r={number:p};v.updateData(n[t].id,r).then((function(e){console.log(e),a(n.map((function(a){return a.id!==n[t].id?a:e}))),m("".concat(u," phone number was changed"),!1,5e3)})).catch((function(e){m("error while trying to update person",!0,5e3)}))}}else{var o={name:u,number:p};v.addData(o).then((function(e){console.log(e),a(n.concat(e)),m("".concat(u," added to phonebook"),!1,5e3)})).catch((function(e){m("error while trying to add person",!0,5e3)}))}l(""),O("")}}},"personform"),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(d,{persons:n,filter:N,deletePerson:function(e){e.preventDefault(),window.confirm("Are you sure you want to delete ".concat(e.target.dataset.fullname))&&v.removeData(e.target.id).then((function(t){t&&(a(n.filter((function(t){return t.id!==e.target.id}))),m("Person ".concat(e.target.dataset.fullname," was removed from the server"),!1,5e3))})).catch((function(t){m("Person ".concat(e.target.dataset.fullname," was already removed from the server, Please refresh the page."),!0,5e3)}))}},"persons")]})};n(38);r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6ef00a13.chunk.js.map