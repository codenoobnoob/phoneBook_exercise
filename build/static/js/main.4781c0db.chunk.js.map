{"version":3,"sources":["components/Render.js","components/Filter.js","components/PersonForm.js","components/Notifications.js","services/persons.js","App.js","index.js"],"names":["DeleteButton","id","name","deleteFunction","data-fullname","style","marginLeft","onClick","ListPerson","number","deletePerson","Persons","persons","filter","renderList","forEach","person","toLowerCase","includes","push","Filter","handeleFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handeleNumberChange","addName","onSubmit","type","notifications","NotificationMessage","message","isError","className","setMessageWithTimeout","setFunction","timeout","setTimeout","errorMessage","baseUrl","personsService","getData","axios","get","then","response","data","addData","newData","post","console","log","updateData","put","removeData","delete","App","useState","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","initialData","catch","error","e","preventDefault","target","newMessage","newIsError","indexOfExisting","map","indexOf","window","confirm","oldId","updatedPerson","returnedPerson","newPerson","concat","dataset","fullname","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4781c0db.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DeleteButton = ({ id, name, deleteFunction }) => {\r\n  return (\r\n    <button\r\n      id={id}\r\n      data-fullname={name}\r\n      style={{ marginLeft: 5 }}\r\n      onClick={deleteFunction}\r\n    >\r\n      delete\r\n    </button>\r\n  );\r\n};\r\n\r\nconst ListPerson = ({ id, name, number, deletePerson }) => {\r\n  return (\r\n    <p>\r\n      {name} {number}\r\n      <DeleteButton id={id} name={name} deleteFunction={deletePerson} />\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Persons = ({ persons, filter, deletePerson }) => {\r\n  const renderList = [];\r\n  persons.forEach((person) => {\r\n    if (\r\n      filter === \"\" ||\r\n      person.name.toLowerCase().includes(filter.toLowerCase())\r\n    ) {\r\n      renderList.push(\r\n        <ListPerson\r\n          key={person.name}\r\n          id={person.id}\r\n          name={person.name}\r\n          number={person.number}\r\n          deletePerson={deletePerson}\r\n        />\r\n      );\r\n    }\r\n  });\r\n  return renderList;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handeleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={filter} onChange={handeleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handeleNumberChange,\r\n  addName,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <h2>add new contact</h2>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handeleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst errorMessage = (message, isError, setFunction) => {\r\n  setFunction({\r\n    message: message,\r\n    isError: isError,\r\n  });\r\n};\r\n\r\nconst setMessageWithTimeout = (message, isError, setFunction, timeout) => {\r\n  setFunction({\r\n    message: message,\r\n    isError: isError,\r\n  });\r\n  setTimeout(() => {\r\n    setFunction({ message: null, isError: false });\r\n  }, timeout);\r\n};\r\n\r\nconst NotificationMessage = ({ message, isError }) => {\r\n  if (message !== null) {\r\n    if (isError) {\r\n      return <div className=\"error\">{message}</div>;\r\n    } else if (!isError) {\r\n      return <div className=\"message\">{message}</div>;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst notifications = {\r\n  NotificationMessage,\r\n  setMessageWithTimeout,\r\n  errorMessage,\r\n};\r\n\r\nexport default notifications;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getData = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst addData = (newData) =>\r\n  axios.post(baseUrl, newData).then((response) => {\r\n    console.log(response.data);\r\n    return response.data;\r\n  });\r\n\r\nconst updateData = (id, newData) =>\r\n  axios.put(`${baseUrl}/${id}`, newData).then((response) => response.data);\r\n\r\nconst removeData = (id) => axios.delete(`${baseUrl}/${id}`).then(() => true);\r\n\r\nconst personsService = {\r\n  getData: getData,\r\n  addData: addData,\r\n  updateData: updateData,\r\n  removeData: removeData,\r\n};\r\nexport default personsService;\r\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Render\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport notifications from \"./components/Notifications\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState({ message: null, isError: false });\n\n  const getDevData = () => {\n    personsService\n      .getData()\n      .then((initialData) => {\n        setPersons(initialData);\n      })\n      .catch((error) => {\n        notifications.errorMessage(\n          `Could not connect to the server. Please check server connectivity and refresh the page! ${error}`,\n          true,\n          setMessage\n        );\n      });\n  };\n\n  useEffect(getDevData, []);\n\n  const AddName = (e) => {\n    e.preventDefault();\n    let newMessage = null;\n    let newIsError = false;\n    const indexOfExisting = persons\n      .map((person) => person.name)\n      .indexOf(newName);\n    if (indexOfExisting !== -1) {\n      if (\n        window.confirm(\n          `${newName} is aleady added to phonebook, replace the old number with the new one?`\n        )\n      ) {\n        newMessage = `${newName} phone number was changed`;\n        const oldId = persons[indexOfExisting].id;\n        const updatedPerson = {\n          name: newName,\n          number: newNumber,\n          id: oldId,\n        };\n        personsService\n          .updateData(persons[indexOfExisting].id, updatedPerson)\n          .then((returnedPerson) =>\n            setPersons(\n              persons.map((person) =>\n                person.id !== oldId ? person : returnedPerson\n              )\n            )\n          )\n          .catch((error) => {\n            newMessage = \"error while trying to update person\";\n            newIsError = true;\n          });\n      }\n    } else {\n      newMessage = `${newName} added to phonebook`;\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personsService\n        .addData(newPerson)\n        .then((returnedPerson) => {\n          console.log(returnedPerson);\n          setPersons(persons.concat(returnedPerson));\n        })\n        .catch((error) => {\n          newMessage = \"error while trying to add person\";\n          newIsError = true;\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n    notifications.setMessageWithTimeout(\n      newMessage,\n      newIsError,\n      setMessage,\n      5000\n    );\n  };\n  const handleNameChange = (e) => {\n    e.preventDefault();\n    setNewName(e.target.value);\n  };\n  const handeleNumberChange = (e) => {\n    e.preventDefault();\n    setNewNumber(e.target.value);\n  };\n  const handeleFilterChange = (e) => {\n    e.preventDefault();\n    setFilter(e.target.value);\n  };\n\n  const deletePerson = (e) => {\n    e.preventDefault();\n    if (\n      window.confirm(\n        `Are you sure you want to delete ${e.target.dataset.fullname}`\n      )\n    ) {\n      personsService\n        .removeData(e.target.id)\n        .then((response) => {\n          if (response) {\n            setPersons(persons.filter((person) => person.id !== e.target.id));\n            notifications.setMessageWithTimeout(\n              `Person ${e.target.dataset.fullname} was removed from the server`,\n              false,\n              setMessage,\n              5000\n            );\n          }\n        })\n        .catch((error) => {\n          notifications.setMessageWithTimeout(\n            `Person ${e.target.dataset.fullname} was already removed from the server, Please refresh the page.`,\n            true,\n            setMessage,\n            5000\n          );\n        });\n    }\n  };\n  return (\n    <div className=\"mainWindow\">\n      <h1>Phonebook</h1>\n      <notifications.NotificationMessage\n        key=\"messages\"\n        message={message.message}\n        isError={message.isError}\n      />\n      <Filter\n        key=\"filter\"\n        filter={filter}\n        handeleFilterChange={handeleFilterChange}\n      />\n      <PersonForm\n        key=\"personform\"\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handeleNumberChange={handeleNumberChange}\n        addName={AddName}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        key=\"persons\"\n        persons={persons}\n        filter={filter}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}