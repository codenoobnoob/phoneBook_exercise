{"version":3,"sources":["components/Render.js","components/Filter.js","components/PersonForm.js","components/Notifications.js","services/persons.js","App.js","index.js"],"names":["DeleteButton","id","name","deleteFunction","data-fullname","style","marginLeft","onClick","ListPerson","number","deletePerson","People","persons","filter","renderList","forEach","person","toLowerCase","includes","push","Filter","handeleFilterChange","value","onChange","PersonForm","newName","newNumber","handleNameChange","handeleNumberChange","addName","onSubmit","type","setNotificationMessage","NotificationMessage","props","React","useState","message","isError","setMessage","newMessage","newIsError","timeoutTime","clearTimeout","errorMessage","timeout","console","log","setTimeout","setMessageWithTimeout","className","baseUrl","personService","getData","axios","get","then","response","data","addData","newData","post","updateData","put","removeData","delete","App","people","setPeople","setNewName","setNewNumber","setFilter","useEffect","initialData","catch","error","e","preventDefault","target","indexOfExisting","map","indexOf","window","confirm","returnedPerson","newPerson","concat","dataset","fullname","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.173b778b.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DeleteButton = ({ id, name, deleteFunction }) => {\r\n  return (\r\n    <button\r\n      id={id}\r\n      data-fullname={name}\r\n      style={{ marginLeft: 5 }}\r\n      onClick={deleteFunction}\r\n    >\r\n      delete\r\n    </button>\r\n  );\r\n};\r\n\r\nconst ListPerson = ({ id, name, number, deletePerson }) => {\r\n  return (\r\n    <p>\r\n      {name} {number}\r\n      <DeleteButton id={id} name={name} deleteFunction={deletePerson} />\r\n    </p>\r\n  );\r\n};\r\n\r\nconst People = ({ persons, filter, deletePerson }) => {\r\n  const renderList = [];\r\n  persons.forEach((person) => {\r\n    if (\r\n      filter === \"\" ||\r\n      person.name.toLowerCase().includes(filter.toLowerCase())\r\n    ) {\r\n      renderList.push(\r\n        <ListPerson\r\n          key={person.name}\r\n          id={person.id}\r\n          name={person.name}\r\n          number={person.number}\r\n          deletePerson={deletePerson}\r\n        />\r\n      );\r\n    }\r\n  });\r\n  return renderList;\r\n};\r\n\r\nexport default People;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handeleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with: <input value={filter} onChange={handeleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handeleNumberChange,\r\n  addName,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <h2>add new contact</h2>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handeleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nlet setNotificationMessage = () => {};\r\n\r\nconst NotificationMessage = ({ props }) => {\r\n  const [message, setMessage] = React.useState({\r\n    message: null,\r\n    isError: false,\r\n  });\r\n\r\n  const errorMessage = (newMessage, newIsError) => {\r\n    if (message) {\r\n      clearTimeout();\r\n    }\r\n\r\n    setMessage({\r\n      message: newMessage,\r\n      isError: newIsError,\r\n    });\r\n  };\r\n\r\n  const setMessageWithTimeout = (newMessage, newIsError, timeout) => {\r\n    console.log(newMessage, newIsError, timeout);\r\n    setMessage({\r\n      message: newMessage,\r\n      isError: newIsError,\r\n    });\r\n    setTimeout(() => {\r\n      setMessage({ message: null, isError: false });\r\n    }, timeout);\r\n  };\r\n\r\n  setNotificationMessage = (newMessage, newIsError, timeoutTime) => {\r\n    if (timeoutTime === 0) {\r\n      errorMessage(newMessage, newIsError);\r\n    } else {\r\n      setMessageWithTimeout(newMessage, newIsError, timeoutTime);\r\n    }\r\n  };\r\n  if (message.message !== null) {\r\n    if (message.isError) {\r\n      return <div className=\"error\">{message.message}</div>;\r\n    } else if (!message.isError) {\r\n      return <div className=\"message\">{message.message}</div>;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nexport { setNotificationMessage };\r\nexport default NotificationMessage;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/people\";\r\n\r\nconst getData = () => axios.get(baseUrl).then((response) => response.data);\r\n\r\nconst addData = (newData) =>\r\n  axios.post(baseUrl, newData).then((response) => {\r\n    return response.data;\r\n  });\r\n\r\nconst updateData = (id, newData) =>\r\n  axios.put(`${baseUrl}/${id}`, newData).then((response) => response.data);\r\n\r\nconst removeData = (id) => axios.delete(`${baseUrl}/${id}`).then(() => true);\r\n\r\nconst personService = {\r\n  getData: getData,\r\n  addData: addData,\r\n  updateData: updateData,\r\n  removeData: removeData,\r\n};\r\nexport default personService;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport People from \"./components/Render\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport NotificationMessage from \"./components/Notifications\";\r\nimport { setNotificationMessage } from \"./components/Notifications\";\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [people, setPeople] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const getDevData = () => {\r\n    personService\r\n      .getData()\r\n      .then((initialData) => {\r\n        setPeople(initialData);\r\n      })\r\n      .catch((error) => {\r\n        setNotificationMessage(\r\n          `Could not connect to the server. Please check server connectivity and refresh the page! ${error}`,\r\n          true,\r\n          0\r\n        );\r\n      });\r\n  };\r\n\r\n  useEffect(getDevData, []);\r\n\r\n  const addName = (e) => {\r\n    e.preventDefault();\r\n    const indexOfExisting = people // Can I implement this some other way???\r\n      .map((person) => person.name)\r\n      .indexOf(newName);\r\n    if (indexOfExisting !== -1) {\r\n      if (\r\n        window.confirm(\r\n          `${newName} is aleady added to phonebook, replace the old number with the new one?`\r\n        )\r\n      ) {\r\n        personService\r\n          .updateData(people[indexOfExisting].id, { number: newNumber })\r\n          .then((returnedPerson) => {\r\n            console.log(returnedPerson);\r\n            setPeople(\r\n              people.map((person) =>\r\n                person.id !== people[indexOfExisting].id\r\n                  ? person\r\n                  : returnedPerson\r\n              )\r\n            );\r\n            setNotificationMessage(\r\n              `${newName} phone number was changed`,\r\n              false,\r\n              5000\r\n            );\r\n          })\r\n          .catch((error) => {\r\n            setNotificationMessage(\r\n              \"error while trying to update person\",\r\n              true,\r\n              5000\r\n            );\r\n          });\r\n      }\r\n    } else {\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newNumber,\r\n      };\r\n      personService\r\n        .addData(newPerson)\r\n        .then((returnedPerson) => {\r\n          console.log(returnedPerson);\r\n          setPeople(people.concat(returnedPerson));\r\n          setNotificationMessage(`${newName} added to phonebook`, false, 5000);\r\n        })\r\n        .catch((error) => {\r\n          setNotificationMessage(error.response.data.error, true, 5000);\r\n        });\r\n    }\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n  const handleNameChange = (e) => {\r\n    e.preventDefault();\r\n    setNewName(e.target.value);\r\n  };\r\n  const handeleNumberChange = (e) => {\r\n    e.preventDefault();\r\n    setNewNumber(e.target.value);\r\n  };\r\n  const handeleFilterChange = (e) => {\r\n    e.preventDefault();\r\n    setFilter(e.target.value);\r\n  };\r\n\r\n  const deletePerson = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      window.confirm(\r\n        `Are you sure you want to delete ${e.target.dataset.fullname}`\r\n      )\r\n    ) {\r\n      personService\r\n        .removeData(e.target.id)\r\n        .then((response) => {\r\n          if (response) {\r\n            setPeople(people.filter((person) => person.id !== e.target.id));\r\n            setNotificationMessage(\r\n              `Person ${e.target.dataset.fullname} was removed from the server`,\r\n              false,\r\n              5000\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          setNotificationMessage(\r\n            `Person ${e.target.dataset.fullname} was already removed from the server, Please refresh the page.`,\r\n            true,\r\n            5000\r\n          );\r\n        });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"mainWindow\">\r\n      <h1>Phonebook</h1>\r\n      <NotificationMessage key=\"messages\" />\r\n      <Filter\r\n        key=\"filter\"\r\n        filter={filter}\r\n        handeleFilterChange={handeleFilterChange}\r\n      />\r\n      <PersonForm\r\n        key=\"personform\"\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handeleNumberChange={handeleNumberChange}\r\n        addName={addName}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <People\r\n        key=\"people\"\r\n        persons={people}\r\n        filter={filter}\r\n        deletePerson={deletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}